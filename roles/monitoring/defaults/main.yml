---
monitoring_namespace: monitoring

prometheus_enabled: true
prometheus_storage_size: 10Gi
prometheus_storage_class: longhorn
prometheus_alertmanager_enabled: true
prometheus_alertmanager_storage_size: 1Gi

grafana_enabled: true
grafana_storage_size: 1Gi
grafana_storage_class: longhorn
grafana_admin_user: admin
grafana_admin_password: admin
# Grafana sidecar configuration (for loading dashboards from ConfigMaps)
grafana_sidecar_enabled: true
grafana_sidecar_label: grafana_dashboard
grafana_sidecar_search_namespace: ALL

# kube-prometheus-stack (Prometheus Operator) settings
# Use this role to install the kube-prometheus-stack chart instead
# of the standalone prometheus chart. When enabled the role will
# install the operator + stack and create CRDs (requires cluster-admin).
# Helm release name to use for kube-prometheus-stack
kube_prometheus_release_name: kube-prom-stack
# Chart reference for the operator stack
kube_prometheus_chart_ref: prometheus-community/kube-prometheus-stack
# Pin kube-prometheus-stack chart to the version currently installed in the cluster
# (safer choice based on `helm list --all-namespaces`)
kube_prometheus_chart_version: "80.0.0"

# Explicit Prometheus ServiceAccount name we will assign in Helm values so
# we can bind RBAC RoleBindings reliably across namespaces.
# This keeps names deterministic for RoleBinding subjects.
kube_prometheus_prometheus_sa_name: "{{ kube_prometheus_release_name }}-prometheus"

# Loki (logs) defaults
loki_enabled: true
# Helm release name for loki-stack
# Release and chart for Loki
loki_release_name: loki
# Use the maintained Loki chart instead of the deprecated "loki-stack"
loki_chart_ref: grafana/loki
# Pin Loki chart version
loki_chart_version: "6.46.0"
# Fluent Bit (logs) defaults
fluentbit_enabled: true
# Fluent Bit chart reference and pinned version
fluentbit_chart_ref: fluent/fluent-bit
fluentbit_chart_version: "0.54.0"
# Optional whitelist of namespaces to collect logs from (empty = all)
# Optional whitelist of namespaces to collect logs from (empty = all)
# For troubleshooting we can temporarily set this to ['.*'] to allow all
# namespaces through the GREP filter. Revert after debugging.
fluentbit_namespace_whitelist: ['.*']
# URL Fluent Bit should push logs to (Loki HTTP push endpoint)
fluentbit_loki_url: "{{ loki_service_url }}/loki/api/v1/push"
# Persistence defaults for Loki
loki_persistence_enabled: true
loki_persistence_size: 20Gi
loki_persistence_storage_class: longhorn
# Full URL Grafana should use to reach Loki (defaults to release service in monitoring ns)
loki_hostname: "{{ loki_release_name }}.{{ monitoring_namespace }}.svc.cluster.local"
loki_service_port: 3100
loki_service_url: "http://{{loki_hostname}}:{{ loki_service_port }}"

# Replication factor for Loki ring/ingesters. Set to 1 for single-node clusters
# to avoid errors like "at least 2 live replicas required, could only find 1".
loki_replication_factor: 1
